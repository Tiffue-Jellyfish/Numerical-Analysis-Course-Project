<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>线性方程组数值求解方法演示系统</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>🔢 线性方程组数值求解方法演示系统</h1>
            <p class="subtitle">数值分析课程设计 - 交互式可视化平台</p>
        </header>

        <!-- 导航标签 -->
        <nav class="tabs">
            <button class="tab-btn active" onclick="showCase('case1')">案例1: 高斯消元法</button>
            <button class="tab-btn" onclick="showCase('case2')">案例2: SOR迭代法</button>
            <button class="tab-btn" onclick="showCase('case3')">案例3: 用户画像</button>
            <button class="tab-btn" onclick="showCase('case4')">案例4: 桥梁平衡</button>
            <button class="tab-btn" onclick="showCase('case5')">案例5: 光线追踪</button>
            <button class="tab-btn" onclick="showCase('case6')">案例6: 共轭梯度</button>
        </nav>

        <!-- 案例1: 高斯消元法 -->
        <div id="case1" class="case-content active">
            <div class="case-header">
                <h2>📐 案例1: 高斯消元法与列主元消元法</h2>
                <p>动态展示算法求解过程，比较不同直接方法的性能</p>
            </div>

            <div class="problem-box">
                <h3>问题描述</h3>
                <p>求解线性方程组 <strong>AX = b</strong>，其中：</p>
                <div class="matrix-display">
                    <pre>
A = [ 3  -2   1   4 ]     b = [  5 ]
    [ 1   3   7  -7 ]         [  2 ]
    [ 3   6   0   3 ]         [ -2 ]
    [ 5   5  -1   8 ]         [  5 ]
                    </pre>
                </div>
            </div>

            <div class="controls">
                <button onclick="runCase1('gauss')" class="btn btn-primary">运行高斯消元法</button>
                <button onclick="runCase1('pivot')" class="btn btn-success">运行列主元消元法</button>
                <button onclick="runCase1('lu')" class="btn btn-info">运行LU分解</button>
                <button onclick="runCase1('lu_pivot')" class="btn btn-warning">运行列主元LU分解</button>
            </div>

            <div id="case1-result" class="result-box" style="display:none;">
                <div id="case1-steps"></div>
                <div id="case1-solution"></div>
            </div>
        </div>

        <!-- 案例2: SOR迭代法 -->
        <div id="case2" class="case-content">
            <div class="case-header">
                <h2>🔄 案例2: SOR迭代法 - 松弛因子探讨</h2>
                <p>研究不同松弛因子ω对收敛速度的影响</p>
            </div>

            <div class="problem-box">
                <h3>问题描述</h3>
                <div class="equation">
                    <pre>
-4x₁ + x₂ + x₃ + x₄ = 1
 x₁ - 4x₂ + x₃ + x₄ = 1
 x₁ + x₂ - 4x₃ + x₄ = 1
 x₁ + x₂ + x₃ - 4x₄ = 1

精确解: x = [-1, -1, -1, -1]ᵀ
                    </pre>
                </div>
            </div>

            <div class="controls">
                <button onclick="runCase2()" class="btn btn-primary">运行SOR迭代 (ω=0.75,1.0,1.25,1.5)</button>
                <button onclick="findOptimalOmega()" class="btn btn-success">搜索最优松弛因子</button>
            </div>

            <div id="case2-result" class="result-box" style="display:none;">
                <div id="case2-chart-container">
                    <canvas id="case2-chart"></canvas>
                </div>
                <div id="case2-summary"></div>
            </div>
        </div>

        <!-- 案例3: 用户画像 -->
        <div id="case3" class="case-content">
            <div class="case-header">
                <h2>👤 案例3: 用户画像特征分析</h2>
                <p>基于线性回归预测用户购买高价值商品的可能性</p>
            </div>

            <div class="problem-box">
                <h3>模型说明</h3>
                <p>建立线性回归模型: <strong>y = β₀ + β₁x₁ + β₂x₂ + ... + β₁₂x₁₂ + ε</strong></p>
                <p>使用最小二乘法求解正规方程组: <strong>(XᵀX)β = XᵀY</strong></p>
            </div>

            <div class="controls">
                <button onclick="runCase3()" class="btn btn-primary">分析用户数据</button>
            </div>

            <div id="case3-result" class="result-box" style="display:none;">
                <div id="case3-coefficients"></div>
                <div id="case3-metrics"></div>
                <div id="case3-chart-container">
                    <canvas id="case3-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- 案例4: 桥梁平衡 -->
        <div id="case4" class="case-content">
            <div class="case-header">
                <h2>🌉 案例4: 桥梁平衡计算</h2>
                <p>求解连续梁桥的支座反力</p>
            </div>

            <div class="controls">
                <button onclick="runCase4Simple()" class="btn btn-primary">简单简支梁</button>
                <button onclick="runCase4('3_span')" class="btn btn-success">三跨连续桥梁</button>
                <button onclick="runCase4('10_span')" class="btn btn-info">10跨连续桥梁</button>
            </div>

            <div id="case4-result" class="result-box" style="display:none;">
                <div id="case4-image"></div>
                <div id="case4-reactions"></div>
                <div id="case4-verification"></div>
            </div>
        </div>

        <!-- 案例5: 光线追踪 -->
        <div id="case5" class="case-content">
            <div class="case-header">
                <h2>💡 案例5: 光线追踪模拟</h2>
                <p>计算光线反射与折射路径</p>
            </div>

            <div class="controls">
                <label>光线数量: <input type="number" id="num-rays" value="50" min="10" max="200"></label>
                <button onclick="runCase5()" class="btn btn-primary">运行光线追踪</button>
            </div>

            <div id="case5-result" class="result-box" style="display:none;">
                <div id="case5-image"></div>
                <div id="case5-stats"></div>
            </div>
        </div>

        <!-- 案例6: 共轭梯度法 -->
        <div id="case6" class="case-content">
            <div class="case-header">
                <h2>⚡ 案例6: 共轭梯度法</h2>
                <p>求解大型稀疏线性方程组</p>
            </div>

            <div class="controls">
                <label>矩阵规模: 
                    <select id="matrix-size">
                        <option value="50">50×50</option>
                        <option value="100" selected>100×100</option>
                        <option value="200">200×200</option>
                        <option value="500">500×500</option>
                    </select>
                </label>
                <button onclick="runCase6()" class="btn btn-primary">运行共轭梯度法</button>
            </div>

            <div id="case6-result" class="result-box" style="display:none;">
                <div id="case6-image"></div>
                <div id="case6-stats"></div>
            </div>
        </div>

        <footer>
            <p>线性方程组数值求解方法课程设计 | 数值分析实验系统 | 2025</p>
        </footer>
    </div>

    <div id="loading" class="loading" style="display:none;">
        <div class="spinner"></div>
        <p>计算中...</p>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>


